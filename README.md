# What it does

This program generates procedural art images. Ideally, the images will be as diverse as possible without sacrificing aesthetics.

An image will contain one to several similar-but-different, ideally complementary, **paintings**, arranged in a **ptych** (from "triptych" or "polyptych").

Outputs are .bmp files, which can be rendered and re-rendered at any resolution based on associated .json files.

An image is drawn based on, essentially, a single, continuous mathematical function of the XY plane. Ideally, the space of pleasing functions will be covered as widely and evenly as possible.

The image is drawn in only one pass based on that function. There is no "composition" beforehand; the color for each pixel is calculated once; there is no distortion or decoration afterwards (apart from the border/glow around the edges).

This is a meta-program in that these functions are generated by mini-programs called **schemes** and **themes**, which are themselves executed and generated by this program, according to the user's direction.

Hence, you can curate outputs at multiple levels: choose which images to save, which themes to save, and which schemes to save.

<br>
<br>

# How to use it

<br>

## 1. Understand...
- the relationship between **schemes** and **themes**. Images are created by one **scheme** and one **theme** together. Together, they specify a stochastic (random number-influenced) system for creating images. A **scheme** owns its **theme**—a theme is only associated with one particular **scheme**.
- what a **ptych** is: a whole, final product of one to several related paintings, either _rendered_ as an image (a `.bmp` file in the `images` folder), or _unrendered_ as a "blueprint" for an image at any resolution (a `.json` file in the `ptychs` folder). If you delete the `.json` file, you will not be able to re-render the image.
- the file system. In the `data` folder are the `images`, `ptychs`, `themes`, and `schemes` folders. Look at the former two to see the saved/re-renderable images, and the latter two to see the saved/usable **schemes** and **themes**. Feel free to rename these files, as long as you (1) do so after quitting the program and deleting the files in the `cache` folder, and (2) maintain the same obvious naming conventions (**ptychs** and images have corresponding filenames; **schemes** and their **themes** have corresponding filenames).

<br>

## 2. Main commands

<br>

- ### re-render

You can re-render an already-produced image at a specified resolution (representing the longer side of the paintings within the ptych). Use a double-quote mark:

`" 2000` will re-render the last shown image at 2000 pixels.

`" nice 2000` will re-render the saved image called "nice" (leave off the extension) at 2000 pixels.

<br>

- ### explore images

You can run and re-run a scheme+theme combination ad infinitum, producing a new image each time, saving the ones you like.

`butterfly alpha` will generate and show a new image with the scheme called "butterfly" and its theme called "alpha".

` ` (just leave the command blank) will generate a new image with whatever scheme and theme were last used. This will be your most used command.

<br> 

- ### explore themes

You can specify a scheme and (repeatedly) direct the program to find a new theme for it, saving the themes you like. Of course, to test each theme, you will probably want to explore its images (run the scheme+theme combination several times), and may want to save some of those images along the way as well.

`butterfly` will find a new **theme** for the **scheme** called "butterfly".

`?` will find a new **theme** for whatever scheme was last used.

<br>

- ### explore schemes

You can specify nothing, and (repeatedly) direct the program to find a new scheme, saving the schemes you like. Of course, to test each scheme, you will probably want to test at least the first-generated theme several times (explore images), and may want to test several more themes for it(explore themes).

`??` will find a new **scheme** with a new, appropriate **theme**, and generate and show a new image created by them.

<br>

- ### interrupt scheme/theme search

Using default settings, searches for **schemes** and **themes** should produce a result in seconds. That said, if the search is taking too long, press ``ctrl+C`` to interrupt it and enter a new command.

<br>

- ### quit

`#` will quit the program.

<br>

- ### manually composed schemes/themes

There are functions in the `art_scheme.py` file where a user can manually compose a **scheme** and/or **theme**. However, this is difficult, and the program is not finalized enough for the effort to be worth it. Hence, the following types of commands will be of no use and should be avoided:

`++` will generate and show a new image with the manually composed **scheme** and **theme**.

`+?` will find a new theme for the manually composed **scheme**.

`butterfly +` will use the manually composed **theme** for the saved scheme called "butterfly".

<br>

## 3. Save commands

<br>

After generating anything (a re-rendered old image, or a new image/**scheme**/**theme**), you will be prompted to save the new content—first the image...

`image` will save the image with a timestamp-based filename, with the render/resolution just shown.

`image 2000` will save the image with a timestamp-based filename, at 2000 pixels.

`image nice` will save the image with the filename "nice", with the render/resolution just shown.

`image nice 2000` will save the image with the filename "nice", at 2000 pixels.

<br>

..and then the **scheme**, **theme**, or both (depending on what has already been saved).

`scheme moth` will save the scheme with the filename "moth".

`theme alpha` will save the theme with the filename "x_alpha", where "x" is the already-named scheme that was used.

`both moth alpha` will save the scheme with the filename "moth" and the the theme with the filename "moth_alpha".

<br>

On either prompt...

`` ` `` (a backtick, next to the `1` key on a normal keyboard) will skip saving entirely.

`-` (a dash) will skip saving just the currently prompted part (the image, or the **scheme**/**theme**).



<br>
<br>

# How it works

## Image creation: Palettes

A palette of several colors is chosen, and arranged in a sequence, both according to some encoded aesthetics about consistencies and inconsistencies of hue, saturation, and value. Each color is given a "thickness"; the palette should be visualized like a vertical diagram of skin or soil layers. The arrangement is stochastically performed 10 times, to produce 10 replicate palettes of the same colors but different sequences.

## Image creation: Rendering/calculations

The values of a 6-valued function (see below) are calculated for each pixel based on its X and Y coordinates. The domains and ranges are all [0,1]. The interpretation of those functions is as follows.

### palette choice

One value of the function determines which of the 10 palettes is to be used. This is made continuous by calculating (see below) and blending both the colors implied by the "ceiling" palette and "floor" palette resulting from this value.

### toonity

One value of the function determines the smoothness or abruptness of the transitions between colors on the palettes used.

### main height

The "main" value of the function is interpreted as a "height" along an imagined vertical palette. Given a palette and a toonity, a height implies a certain color. In general, the pixel will be between two palettes (see palette choice), so the color will be calculated for both palettes and blended in between.

### hue, saturation, value tweaking

The other 3 values of the function determine the extent to which the hue, saturation, and value are to be shifted upwards or downwards from the main color.

## Image creation: Function building

### Function ontology

A function is an arbitrary composition of about a dozen possible components, currently known as `X`, `Y`, `RAND`, `INV`, `POW`, `POWER`, `SIGMOID`, `ARCFAN`, `SIN`, `SPIN`, `MINX`, `AMEAN`, and `GMEAN`. You can guess at their meaning. Most take at least one argument (e.g., the base in `POW`) and have at least one parameter (e.g., the exponent in `POW`). Specifically, a function is represented as a directed acyclic graph (DAG), where nodes represent these parametrized components
